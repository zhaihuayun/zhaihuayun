# UART-单线通信
## 关键字: UART, 单线通信

**【功能描述】**
+ UART单线通信，使用一根线连接UART1和UART2的TX和RX，UART通过不断的切换接收和发送功能，从而实现在单线上的数据接收和发送。

**【示例配置】**
+ TIMER定时器：TIMER用于监控UART发送是否完成，若发送完成，则可以进行数据的接收，UART切换为数据接收功能。默认0.5ms判断一次UART的发送状态，用户可在TIMER的配置界面中更改此配置周期。

+ 接线方式：此用例使用了UART1和UART2进行单线通信，其单线的连接方式如下:
```c
  UART1_Tx---|_____|---UART2_Tx
  UART1_Rx---|     |---UART2_Rx
```

+ 发送数据和接收数据：发送数据和接收数据都是采用中断的模式，发送完成或接收完成之后，会调用发送完成中断和接收完成中断回调函数。

+ 状态机：由于UART采用单线通信，因此UART总线上同一时间只能存在一种状态，因此需要控制UART1和UART2的收发使能，此示例中采用状态机控制，使得总线上同一时刻只能处于下列一种状态：UART1发送UART2接收、空闲、UART2发送UART1接收。 

+ 串口0（UART0）用于打印调试信息，串口2（UART2）和串口1(UART1)用于单线通信，用户可以查看串口0的调试信息，判断单线通信是否正常。

**【示例效果】**
+ 运行样例之后，查看串口0的信息，UART1和UART2会循环的发送和接收数据。

**【注意事项】**
+ 串口通信的波特率，校验位等配置需保持一致，可以通过UART配置界面进行更改。

+ 此sample适用于单线实现UART的通讯功能，此时UART为半双工工作模式。